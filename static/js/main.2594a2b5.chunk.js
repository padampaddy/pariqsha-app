(this["webpackJsonppariqsha-app"]=this["webpackJsonppariqsha-app"]||[]).push([[0],{162:function(e,t,n){},163:function(e,t,n){},317:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(67),c=n.n(a),s=(n(162),n(163),n(10)),o=n(40),l=n(19),d=Object(o.c)({name:"modal",initialState:{visible:!1},reducers:{showModal:function(e,t){var n=t.payload;return Object(l.a)(Object(l.a)(Object(l.a)({},e),n),{},{visible:!0})},hideModal:function(e){e.visible=!1}}}),u=n(23),b=n.n(u),j=n(35),h="c38e1adf-afad-45f4-9017-a803290f3281",m="https://auth.app.pariqsha.com",x="".concat(m,"/api/login"),f="".concat(m,"/api/user/forgot-password"),p="".concat(m,"/api/user/registration/"),v="".concat(m,"/api/jwt/refresh"),O="rzp_test_AjijXUrhJvEYtP",g=function(e){var t=e.email,n=e.password;return fetch(x,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({loginId:t,password:n,applicationId:h})})},w=function(e){return fetch(p,{method:"POST",headers:{"Content-type":"application/json",Authorization:"seKKkbWSPZ2qtGWP6a2MWG-3WewgcdZeAZlBmInLexgTKFZPouYtZG6u"},body:JSON.stringify(e)})},y=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,i,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("entities")){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return n=JSON.parse(t),i=n.token,r=n.refreshToken,e.next=6,fetch(v,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({token:i,refreshToken:r})});case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.abrupt("return",c.token);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=Object(o.b)("users/login",function(){var e=Object(j.a)(b.a.mark((function e(t){var n,i,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,i=t.password,e.next=3,g({email:n,password:i});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(o.b)("users/signup",function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function _(e){localStorage.setItem("entities",JSON.stringify(e))}function q(){var e=localStorage.getItem("entities");return e?JSON.parse(e):void 0}var k=Object(o.c)({name:"user",initialState:{entities:q(),loading:"idle"},reducers:{saveToken:function(e,t){var n=t.payload;e.entities.token=n,_(e.entities)},logout:function(e){e.entities=void 0,e.loading="idle",localStorage.clear()}},extraReducers:function(e){e.addCase(z.pending,(function(e){e.loading="pending"})),e.addCase(z.fulfilled,(function(e,t){var n=t.payload;e.loading="succeeded",_(n),e.entities=n})),e.addCase(z.rejected,(function(e){e.loading="failed"})),e.addCase(N.pending,(function(e){e.loading="pending"})),e.addCase(N.fulfilled,(function(e,t){var n=t.payload;e.loading="succeeded",_(n),e.entities=n})),e.addCase(N.rejected,(function(e){e.loading="failed"}))}}),C=Object(o.a)({reducer:{user:k.reducer,modal:d.reducer}}),I=n(0),S=function(){var e=Object(s.c)((function(e){return e.modal})),t=e.title,n=e.visible,i=e.body,r=Object(s.b)();return n?Object(I.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(I.jsxs)("div",{className:"flex items-start justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(I.jsx)("div",{onClick:function(){return r(d.actions.hideModal())},className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(I.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(I.jsx)("div",{className:"inline-block align-center bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 w-full max-w-2xl",children:Object(I.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(I.jsxs)("div",{className:"sm:flex sm:items-start",children:[Object(I.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:Object(I.jsx)("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),Object(I.jsxs)("div",{className:"mt-3 text-center flex-grow sm:mt-0 sm:ml-4 sm:text-left",children:[Object(I.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:t}),i]})]})})})]})}):null},P=n(6),M=n(21),$=n.p+"static/media/pariqsha.8035258e.png";var L=function(e){var t=e.children,n=Object(i.useState)(window.innerHeight),r=Object(P.a)(n,2),a=r[0],c=r[1],s=Object(i.useState)(window.innerWidth),o=Object(P.a)(s,2),l=o[0],d=o[1];return Object(i.useEffect)((function(){window.addEventListener("resize",(function(){c(window.innerHeight),d(window.innerWidth)}))}),[]),Object(I.jsxs)("div",{style:{width:l,height:a},className:"flex overflow-hidden flex-col flex-1",children:[Object(I.jsx)("div",{className:"w-full flex-grow bg-gradient-to-tl overflow-y-auto pb-8 from-red-100 to-blue-100",children:t}),Object(I.jsx)("div",{className:"text-center bg-white bg-opacity-50 shadow-sm text-gray-400 p-4 w-screen",children:"\xa9 Pariqsha, 2021. All rights reserved."})]})},B=function(){var e=Object(i.useState)(""),t=Object(P.a)(e,2),n=t[0],r=t[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"mt-2 text-left text-sm text-gray-500",children:Object(I.jsx)("form",{children:Object(I.jsxs)("div",{className:"mb-4",children:[Object(I.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",htmlFor:"email",children:"Email"}),Object(I.jsx)("input",{className:"w-full p-3 leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline",id:"email",onChange:function(e){return r(e.target.value)},inputMode:"email",type:"email",placeholder:"Enter Email Address..."})]})})}),Object(I.jsx)("div",{className:"bg-gray-50 flex justify-end py-3 sm:px-6",children:Object(I.jsx)("button",{className:"w-50 px-4 bg-blue-600 py-2 text-white rounded hover:bg-blue-700 focus:outline-none focus:shadow-outline",type:"button",onClick:function(){!function(e){fetch(f,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({loginId:e})})}(n)},children:"Reset Password"})})]})};function T(){var e=Object(s.c)((function(e){return e.user})).loading,t=Object(i.useState)(""),n=Object(P.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(""),o=Object(P.a)(c,2),l=o[0],u=o[1],b=Object(s.b)();return Object(I.jsx)(L,{children:Object(I.jsxs)("div",{className:"max-w-md pt-8 mx-auto",children:[Object(I.jsx)("img",{src:$,className:"h-20 w-20 mx-auto",alt:"pariqsha logo"}),Object(I.jsx)("h1",{className:"text-md font-bold mt-4 text-center",children:"Hi, Welcome to Pariqsha"}),Object(I.jsxs)("div",{className:"flex shadow bg-white mt-4 p-8 rounded m-auto text-center flex-col align-middle justify-center",children:[Object(I.jsxs)("p",{className:"my-4 text-gray-500",children:["New here?",Object(I.jsx)(M.b,{className:"text-blue-400 hover:text-blue-600 ml-1",to:"/signup",children:"Sign up now..."})]}),Object(I.jsx)("form",{onSubmit:function(e){e.preventDefault(),b(z({email:r,password:l}))},children:Object(I.jsxs)("fieldset",{className:"flex my-3 rounded flex-col max-w-lg mx-auto",children:[Object(I.jsx)("label",{className:"text-left text-xs text-gray-500",htmlFor:"",children:"Email"}),Object(I.jsx)("input",{autoFocus:!0,type:"text",className:"input",onChange:function(e){return a(e.target.value)},autoComplete:"new-password",placeholder:"john@doe.com"}),Object(I.jsx)("label",{className:"text-left text-xs text-gray-500",htmlFor:"",children:"Password"}),Object(I.jsx)("input",{type:"password",className:"input",onChange:function(e){return u(e.target.value)},autoComplete:"new-password",placeholder:"*******"}),Object(I.jsx)("button",{type:"button",onClick:function(){b(d.actions.showModal({title:"Forgot Password",body:Object(I.jsx)(B,{})}))},className:"text-blue-300 text-sm hover:text-blue-500 focus:outline-none mb-3 self-end",children:"Forgot Your Password? Click here..."}),Object(I.jsx)("button",{className:"button mt-3 self-end",children:"pending"===e?"Logging In...":"succeeded"===e?"Login Successful":"Login"})]})})]})]})})}function W(){var e=Object(s.c)((function(e){return e.user})).loading,t=Object(i.useState)(""),n=Object(P.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(""),o=Object(P.a)(c,2),l=o[0],d=o[1],u=Object(i.useState)(""),b=Object(P.a)(u,2),j=b[0],m=b[1],x=Object(s.b)();return Object(I.jsx)(L,{children:Object(I.jsxs)("div",{className:"max-w-md pt-8 mx-auto",children:[Object(I.jsx)("img",{src:$,className:"h-20 w-20 mx-auto",alt:"pariqsha logo"}),Object(I.jsx)("h1",{className:"text-md font-bold mt-4 text-center",children:"Hi, Welcome to Pariqsha"}),Object(I.jsxs)("div",{className:"flex shadow bg-white mt-4 p-8 rounded m-auto text-center flex-col align-middle justify-center",children:[Object(I.jsxs)("p",{className:"my-4 text-gray-500",children:["Already registered?",Object(I.jsx)(M.b,{className:"text-blue-400 hover:text-blue-600 ml-1",to:"/signin",children:"Sign in here..."})]}),Object(I.jsx)("form",{onSubmit:function(e){e.preventDefault(),j===l&&x(N({registration:{applicationId:h},user:{email:r,password:l}}))},children:Object(I.jsxs)("fieldset",{className:"flex my-3 rounded flex-col max-w-lg mx-auto",children:[Object(I.jsx)("label",{className:"text-left text-xs text-gray-500",htmlFor:"",children:"Email"}),Object(I.jsx)("input",{autoFocus:!0,type:"text",className:"input",onChange:function(e){return a(e.target.value)},autoComplete:"new-password",placeholder:"john@doe.com"}),Object(I.jsx)("label",{className:"text-left text-xs text-gray-500",htmlFor:"",children:"Enter a Password"}),Object(I.jsx)("input",{type:"password",onChange:function(e){return d(e.target.value)},className:"input",autoComplete:"new-password",placeholder:"*******"}),Object(I.jsx)("label",{className:"text-left text-xs text-gray-500",htmlFor:"",children:"Confirm your Password"}),Object(I.jsx)("input",{type:"password",onChange:function(e){return m(e.target.value)},className:"input",autoComplete:"new-password",placeholder:"*******"}),Object(I.jsxs)("label",{className:"inline-flex items-center",children:[Object(I.jsx)("input",{type:"checkbox"}),Object(I.jsx)("span",{className:"ml-2 text-gray-600",children:"I agree to terms & conditions"})]}),Object(I.jsxs)("button",{className:"button mt-3 self-end",children:[" ","pending"===e?"Signing up...":"succeeded"===e?"Signed up Successful":"Signup"]})]})})]})]})})}var E,A,F,H,J,R,D,Q,U=n(14),V=n(76),Z=function(e){var t=e.children,n=Object(V.a)(e,["children"]),i=Object(s.c)((function(e){return e.user.entities}));return Object(I.jsx)(U.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return(null===i||void 0===i?void 0:i.user)?t:Object(I.jsx)(U.a,{to:{pathname:"/signin",state:{from:n}}})}}))},Y=n(329),G=n(331),K=n(28),X=n.n(K),ee=n(48),te=n(36),ne=n(47),ie=Object(ne.a)(E||(E=Object(te.a)(["\n  query get_today_quizzes($date: timestamptz!) {\n    quiz_quiz(where: { end_at: { _gte: $date } }) {\n      cover\n      created_at\n      description\n      short_description\n      end_at\n      id\n      image\n      start_at\n      title\n      topics\n      price\n    }\n  }\n"]))),re=Object(ne.a)(A||(A=Object(te.a)(["\n  query get_quiz_by_pk($id: uuid!) {\n    quiz_quiz_by_pk(id: $id) {\n      cover\n      created_at\n      description\n      short_description\n      end_at\n      id\n      image\n      start_at\n      title\n      topics\n      price\n    }\n  }\n"]))),ae=Object(ne.a)(F||(F=Object(te.a)(["\n  query get_registration_quiz($quizId: uuid!, $userId: uuid!) {\n    quiz_registration(\n      where: { quiz: { _eq: $quizId }, user_id: { _eq: $userId } }\n    ) {\n      id\n    }\n  }\n"]))),ce=Object(ne.a)(H||(H=Object(te.a)(["\n  query get_my_quizzes($user: uuid!) {\n    quiz_registration(where: { user_id: { _eq: $user } }) {\n      quizByQuiz {\n        cover\n        created_at\n        description\n        end_at\n        short_description\n        id\n        image\n        start_at\n        title\n        topics\n      }\n    }\n  }\n"]))),se=Object(ne.a)(J||(J=Object(te.a)(["\n  mutation registerQuiz($quizId: uuid!, $userId: uuid!) {\n    insert_quiz_registration_one(object: { quiz: $quizId, user_id: $userId }) {\n      quiz\n      user_id\n    }\n  }\n"]))),oe=Object(ne.a)(R||(R=Object(te.a)(["\n  mutation unregisterQuiz($userId: uuid!, $quizId: uuid!) {\n    delete_quiz_registration(\n      where: { user_id: { _eq: $userId }, quiz: { _eq: $quizId } }\n    ) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"]))),le=Object(ne.a)(D||(D=Object(te.a)(["\n  mutation addRPPayload($orderId: uuid!, $payload: String!) {\n    update_quiz_orders_by_pk(\n      pk_columns: { id: $orderId }\n      _set: { payload: $payload }\n    ) {\n      quiz\n    }\n  }\n"]))),de=Object(ne.a)(Q||(Q=Object(te.a)(["\n  mutation makeRefundRequest($quizId: uuid!) {\n    insert_quiz_refund_request_one(object: { quiz_id: $quizId }) {\n      quiz_id\n    }\n  }\n"])));function ue(e){var t=e.price;return Object(I.jsx)("div",{className:"inline-flex items-center justify-center w-32 py-2 absolute top-2  text-lg -left-8 bg-pink-600 font-bold transform -rotate-45 text-gray-200 bg-opacity-80",children:t&&0!==t?String.fromCharCode(8377)+t+"/-":"Free"})}function be(e){var t=e.title,n=e.decorate,i=void 0!==n&&n,r=e.subTitle,a=e.content,c=e.imgSrc,s=e.coverImgSrc,o=e.footer,l=e.date,d=e.price,u=e.time,b=e.duration;return Object(I.jsxs)("div",{className:"w-full text-sm ".concat(i?"max-w-md":"max-w-6xl"," bg-white flex flex-col overflow-hidden  tracking-wide ").concat(i?"shadow-lg border-gray-300  rounded-md border-2":""),style:{zoom:i?.85:1},children:[s&&Object(I.jsxs)("div",{className:"relative",children:[l&&Object(I.jsxs)("div",{className:"absolute top-0 bottom-0 my-auto w-full flex flex-col justify-center items-end bg-opacity-20 bg-black right-0 text-gray-200 text-2xl font-bold",children:[Object(I.jsx)("span",{className:"bg-blue-700 py-4 px-8 bg-opacity-80 rounded-l-md",children:l}),Object(I.jsxs)("span",{className:"bg-blue-700 py-2 mt-2 text-sm px-8 bg-opacity-70  rounded-l-md",children:["starts ",u]})]}),Object(I.jsx)("img",{className:"w-full h-48 object-cover object-center",src:s,alt:"cover"}),Object(I.jsx)(ue,{price:d})]}),Object(I.jsxs)("div",{className:"p-6 flex-grow",children:[Object(I.jsxs)("div",{id:"header",className:"flex items-center mb-4",children:[c&&Object(I.jsx)("img",{alt:"avatar",className:"w-16 h-16 rounded-full border-2 object-cover border-gray-300",src:c})," ",Object(I.jsxs)("div",{id:"header-text",className:"leading-5 w-full relative ml-6 sm",children:[Object(I.jsxs)("h4",{id:"name",className:"text-xl font-semibold",children:[t,Object(I.jsxs)("span",{className:"text-sm ml-4 text-gray-600",children:["(",b,")"]})]}),Object(I.jsx)("h5",{id:"job",className:"font-semibold text-blue-600",children:r}),o&&!i&&Object(I.jsx)("div",{className:"hidden absolute top-0 right-0 py-3 max-w-lg md:flex",children:o})]})]}),Object(I.jsx)("div",{children:a})]}),o&&Object(I.jsx)("div",{className:"border-t-2 flex flex-row px-6 py-3 justify-between items-center",children:o})]})}function je(e){var t=e.active,n=void 0!==t&&t,i=e.onToggle,r=e.inactiveLabel,a=e.activeLabel;return Object(I.jsxs)("div",{className:"flex justify-center items-center",children:[Object(I.jsx)("span",{className:"text-sm  font-semibold ".concat(n?"text-gray-400":"text-gray-500"),children:r}),Object(I.jsx)("div",{className:"w-14 h-7 flex items-center  rounded-full mx-3 px-1 ".concat(n?"bg-blue-500":"bg-gray-300"),onClick:function(){return i()},children:Object(I.jsx)("div",{className:"bg-white w-5 h-5 rounded-full shadow-md transition transform ".concat(n?"translate-x-7":"")})}),Object(I.jsx)("span",{className:"text-sm  font-semibold ".concat(n?"text-gray-500":"text-gray-400"),children:a})]})}var he=function(e){var t=e.onClose,n=Object(s.b)();return Object(I.jsx)("div",{className:"w-screen z-50 h-full flex flex-row",children:Object(I.jsxs)("div",{className:"flex flex-col bg-white w-screen overflow-hidden",children:[Object(I.jsx)("div",{className:"flex items-center justify-start text-3xl py-2 px-4",children:Object(I.jsx)("button",{onClick:function(){t()},className:"focus:outline-none lg:hidden",children:"\xd7"})}),Object(I.jsxs)("ul",{className:"flex flex-col py-4",children:[Object(I.jsx)("li",{children:Object(I.jsxs)(M.b,{className:"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800",to:"/home",onClick:function(){return t()},children:[Object(I.jsx)("span",{className:"inline-flex items-center justify-center h-12 w-12",children:Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"text-gray-400 h-5 w-5 fill-current",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{d:"M21.743,12.331l-9-10c-0.379-0.422-1.107-0.422-1.486,0l-9,10c-0.265,0.293-0.331,0.715-0.17,1.076 C2.247,13.768,2.605,14,3,14h2v7c0,0.552,0.447,1,1,1h3c0.553,0,1-0.448,1-1v-4h4v4c0,0.552,0.447,1,1,1h3c0.553,0,1-0.448,1-1v-7h2 c0.395,0,0.753-0.232,0.913-0.593C22.074,13.046,22.008,12.625,21.743,12.331z"})})}),Object(I.jsx)("span",{className:"text-sm font-medium",children:"Home"})]})}),Object(I.jsx)("li",{children:Object(I.jsxs)(M.b,{className:"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800",to:"/signin",onClick:function(){n(k.actions.logout()),t()},children:[Object(I.jsxs)("span",{className:"inline-flex items-center justify-center h-12 w-12",children:[Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 fill-current text-gray-400",viewBox:"0 0 24 24",children:[Object(I.jsx)("path",{d:"M16 13L16 11 7 11 7 8 2 12 7 16 7 13z"}),Object(I.jsx)("path",{d:"M20,3h-9C9.897,3,9,3.897,9,5v4h2V5h9v14h-9v-4H9v4c0,1.103,0.897,2,2,2h9c1.103,0,2-0.897,2-2V5C22,3.897,21.103,3,20,3z"})]})," "]}),Object(I.jsx)("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})};var me=function(e){var t=e.children,n=e.title,r=void 0===n?"Pariqsha":n,a=e.actionButtons,c=void 0===a?[]:a,s=e.showBack,o=void 0!==s&&s,l=Object(i.useState)(window.innerHeight),d=Object(P.a)(l,2),u=d[0],b=d[1],j=Object(i.useState)(window.innerWidth),h=Object(P.a)(j,2),m=h[0],x=h[1],f=Object(i.useState)(!1),p=Object(P.a)(f,2),v=p[0],O=p[1],g=Object(U.g)();return Object(i.useEffect)((function(){window.addEventListener("resize",(function(){b(window.innerHeight),x(window.innerWidth)}))}),[]),Object(I.jsxs)("div",{style:{width:m,height:u},className:"flex overflow-hidden flex-col flex-1",children:[Object(I.jsx)("div",{className:"fixed overflow-hidden  transition-width duration-500 top-0 left-0 ".concat(v?"w-80":"w-0 lg:w-80"),style:{height:u,zIndex:o?-1:1e3},children:!o&&Object(I.jsx)(he,{onClose:function(){O(!1)}})}),Object(I.jsxs)("div",{className:"shadow-sm items-center flex flex-row gap-4 p-4 w-screen relative",children:[o?Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 cursor-pointer absolute left-4 top-0 bottom-0 my-auto",viewBox:"0 0 512 512",onClick:function(){return g.goBack()},children:[Object(I.jsx)("title",{children:"Arrow Back"}),Object(I.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M244 400L100 256l144-144M120 256h292"})]}):Object(I.jsx)("svg",{onClick:function(){O(!0)},xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 cursor-pointer absolute left-4 top-0 bottom-0 my-auto  lg:hidden",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{d:"M4 6H20V8H4zM4 11H20V13H4zM4 16H20V18H4z"})}),Object(I.jsx)("h4",{className:"text-lg flex-grow font-semibold flex-1 text-center",children:r}),Object(I.jsx)("div",{className:"absolute right-4 top-0 bottom-0 my-auto items-center flex",children:c.flatMap((function(e,t){return Object(I.jsx)("div",{onClick:e.onClick,children:e.icon},t)}))})]}),Object(I.jsx)("div",{className:"w-full ".concat(o?"":"lg:pl-96"," flex-grow bg-gradient-to-tl overflow-y-auto pb-8 from-red-100 to-blue-100"),children:t})]})};function xe(e){var t=e.onConfirm,n=Object(s.b)();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"my-2",children:"Are you sure you want to unregister?"}),Object(I.jsx)("div",{className:"text-gray-400 font-semibold text-sm",children:"If you have paid for the quiz, your refund request will be raised automatically. Please contact us using the contact us form for details."}),Object(I.jsxs)("div",{className:"flex mt-4 items-center justify-center ",children:[Object(I.jsx)("button",{className:"text-red-500 button-link px-12",onClick:function(){return t()},children:"Yes"}),Object(I.jsx)("button",{onClick:function(){return n(d.actions.hideModal())},className:"button bg-gray-100 text-gray-600",children:"No"})]})]})}var fe=(new Date).toISOString();function pe(){var e,t=Object(s.c)((function(e){var t;return null===(t=e.user.entities)||void 0===t?void 0:t.user})),n=Object(Y.a)(ie,{variables:{date:fe}}).data,r=Object(Y.a)(ce,{variables:{user:null===t||void 0===t?void 0:t.id}}),a=r.data,c=r.refetch,o=Object(ee.b)("orders",{cache:"no-cache"}).post,l=Object(i.useState)(!1),u=Object(P.a)(l,2),h=u[0],m=u[1],x=Object(G.a)(se),f=Object(P.a)(x,1)[0],p=Object(G.a)(oe),v=Object(P.a)(p,1)[0],g=Object(G.a)(le),w=Object(P.a)(g,1)[0],y=Object(G.a)(de),z=Object(P.a)(y,1)[0],N=Object(s.b)(),_=Object(U.g)();Object(i.useEffect)((function(){c({user:null===t||void 0===t?void 0:t.id})}),[c,null===t||void 0===t?void 0:t.id]);var q=Object(i.useCallback)((function(){var e=null===n||void 0===n?void 0:n.quiz_quiz;return e?(h&&(e=e.filter((function(e){return-1!==(null===a||void 0===a?void 0:a.quiz_registration.findIndex((function(t){return t.quizByQuiz.id===e.id})))}))),e.flatMap((function(e,n){return Object(I.jsx)(be,{decorate:!0,title:e.title,imgSrc:e.image,content:Object(I.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e.short_description}),price:e.price,date:X()(e.start_at).format("Do MMM"),coverImgSrc:e.cover,time:X()(e.start_at).format("h:mm A"),duration:X.a.duration(X()(e.start_at).diff(X()(e.end_at))).humanize(),subTitle:e.topics.split(",").join(", "),footer:Object(I.jsxs)(I.Fragment,{children:[-1===(null===a||void 0===a?void 0:a.quiz_registration.findIndex((function(t){return t.quizByQuiz.id===e.id})))?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("button",{className:"button",onClick:Object(j.a)(b.a.mark((function n(){var i,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.price){n.next=3;break}return Promise.all([f({variables:{userId:null===t||void 0===t?void 0:t.id,quizId:e.id}})]).catch((function(e){console.error(e)})).then((function(){c({user:null===t||void 0===t?void 0:t.id})})),n.abrupt("return");case 3:return n.next=5,o({quizId:e.id});case 5:i=n.sent,r={key:O,amount:100*i.amount,currency:"INR",name:"Pariqsha",description:"Test Transaction",image:"https://pariqsha.com/static/media/pariqsha.8035258e.png",order_id:i.id,handler:function(n){Promise.all([w({variables:{orderId:i.receipt,payload:JSON.stringify(n)}}),f({variables:{userId:null===t||void 0===t?void 0:t.id,quizId:e.id}})]).catch((function(e){console.error(e)})).then((function(){c({user:null===t||void 0===t?void 0:t.id})}))}},new Razorpay(r).open();case 9:case"end":return n.stop()}}),n)}))),children:"Register"})}):Object(I.jsx)("button",{className:"button-link text-red-500",onClick:function(){N(d.actions.showModal({title:"Are you sure?",body:Object(I.jsx)(xe,{onConfirm:function(){Promise.all([z({variables:{quizId:e.id}}),v({variables:{userId:null===t||void 0===t?void 0:t.id,quizId:e.id}})]).catch((function(e){console.error(e)})).then((function(){N(d.actions.hideModal()),c({user:null===t||void 0===t?void 0:t.id})}))}})}))},children:"Unregister"}),Object(I.jsx)("button",{onClick:function(){return _.push("details/".concat(e.id))},className:"bg-gray-200 button-link",children:"View Details"})]})},n)}))):Object(I.jsx)("div",{})}),[null===n||void 0===n?void 0:n.quiz_quiz,h,null===a||void 0===a?void 0:a.quiz_registration,o,w,f,null===t||void 0===t?void 0:t.id,c,N,z,v,_]);return Object(I.jsxs)(me,{actionButtons:[{icon:Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 fill-current text-gray-500",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{d:"M12 22c1.311 0 2.407-.834 2.818-2H9.182C9.593 21.166 10.689 22 12 22zM19 14.586V10c0-3.217-2.185-5.927-5.145-6.742C13.562 2.52 12.846 2 12 2s-1.562.52-1.855 1.258C7.185 4.074 5 6.783 5 10v4.586l-1.707 1.707C3.105 16.48 3 16.734 3 17v1c0 .553.447 1 1 1h16c.553 0 1-.447 1-1v-1c0-.266-.105-.52-.293-.707L19 14.586z"})}),onClick:function(){}},{icon:Object(I.jsx)("div",{className:"capitalize ml-2 px-2 rounded-full bg-gray-400 text-white font-semibold",children:null===t||void 0===t||null===(e=t.username)||void 0===e?void 0:e[0]}),onClick:function(){}}],children:[Object(I.jsx)("div",{className:"flex justify-end px-4 pt-4",style:{zoom:.8},children:Object(I.jsx)(je,{onToggle:function(){return m((function(e){return!e}))},active:h,inactiveLabel:"Discover",activeLabel:"Upcoming"})}),Object(I.jsxs)("div",{className:"flex flex-col items-center p-4 gap-4",children:[Object(I.jsx)("h2",{className:"place-self-start text-3xl font-semibold",children:h?"Upcoming Quizzes":"Discover Quizzes"}),Object(I.jsx)("div",{className:"flex flex-row flex-wrap gap-4 w-full",children:q()})]})]})}var ve=function(e){var t=e.children,n=Object(V.a)(e,["children"]),i=Object(s.c)((function(e){return e.user.entities}));return Object(I.jsx)(U.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return(null===i||void 0===i?void 0:i.user)?Object(I.jsx)(U.a,{to:{pathname:"/home",state:{from:n}}}):t}}))},Oe=n(145),ge=n(328),we=n(186),ye=n(44),ze=n(91),Ne=n(318),_e=n(148),qe=n(147),ke=n(58),Ce=n(41),Ie=n(316),Se=n(149),Pe=n.n(Se),Me=n(150),$e=n.n(Me);function Le(e){var t=e.md,n=void 0===t?"":t;return Object(I.jsx)("div",{className:"prose lg:prose-xl max-w-none",children:Object(I.jsx)($e.a,{remarkPlugins:[Pe.a],children:n})})}function Be(){var e=Object(U.i)().id,t=Object(s.c)((function(e){var t;return null===(t=e.user.entities)||void 0===t?void 0:t.user})),n=Object(Y.a)(re,{variables:{id:e}}).data,r=Object(Y.a)(ae,{variables:{quizId:e,userId:null===t||void 0===t?void 0:t.id}}),a=r.data,c=r.refetch,o=Object(ee.b)("orders",{cache:"no-cache"}).post;Object(i.useEffect)((function(){c({quizId:e,userId:null===t||void 0===t?void 0:t.id})}),[e,c,null===t||void 0===t?void 0:t.id]);var l=Object(G.a)(se),u=Object(P.a)(l,1)[0],h=Object(G.a)(oe),m=Object(P.a)(h,1)[0],x=Object(G.a)(le),f=Object(P.a)(x,1)[0],p=Object(G.a)(de),v=Object(P.a)(p,1)[0],g=Object(s.b)();return Object(I.jsx)(me,{title:"Details",showBack:!0,children:Object(I.jsx)("div",{className:"flex justify-center",children:Object(I.jsx)(be,{title:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.title,imgSrc:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.image,content:Object(I.jsx)(Le,{md:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.description}),price:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.price,date:X()(null===n||void 0===n?void 0:n.quiz_quiz_by_pk.start_at).format("Do MMM"),coverImgSrc:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.cover,time:X()(null===n||void 0===n?void 0:n.quiz_quiz_by_pk.start_at).format("h:mm A"),duration:X.a.duration(X()(null===n||void 0===n?void 0:n.quiz_quiz_by_pk.start_at).diff(X()(null===n||void 0===n?void 0:n.quiz_quiz_by_pk.end_at))).humanize(),subTitle:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.topics.split(",").join(", "),footer:0===(null===a||void 0===a?void 0:a.quiz_registration.length)?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("button",{className:"button",onClick:Object(j.a)(b.a.mark((function i(){var r,a;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==(null===n||void 0===n?void 0:n.quiz_quiz_by_pk.price)){i.next=3;break}return Promise.all([u({variables:{userId:null===t||void 0===t?void 0:t.id,quizId:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.id}})]).catch((function(e){console.error(e)})).then((function(){c({user:null===t||void 0===t?void 0:t.id})})),i.abrupt("return");case 3:return i.next=5,o({quizId:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.id});case 5:r=i.sent,a={key:O,amount:100*r.amount,currency:"INR",name:"Pariqsha",description:"Test Transaction",image:"https://pariqsha.com/static/media/pariqsha.8035258e.png",order_id:r.id,handler:function(i){Promise.all([f({variables:{orderId:r.receipt,payload:JSON.stringify(i)}}),u({variables:{userId:null===t||void 0===t?void 0:t.id,quizId:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.id}})]).catch((function(e){console.error(e)})).then((function(){c({quizId:e,userId:null===t||void 0===t?void 0:t.id})}))}},new Razorpay(a).open();case 9:case"end":return i.stop()}}),i)}))),children:"Register"})}):Object(I.jsx)("button",{className:"button-link text-red-500",onClick:function(){g(d.actions.showModal({title:"Are you sure?",body:Object(I.jsx)(xe,{onConfirm:function(){Promise.all([v({variables:{quizId:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.id}}),m({variables:{userId:null===t||void 0===t?void 0:t.id,quizId:null===n||void 0===n?void 0:n.quiz_quiz_by_pk.id}})]).catch((function(e){console.error(e)})).then((function(){g(d.actions.hideModal()),c({quizId:e,userId:null===t||void 0===t?void 0:t.id})}))}})}))},children:"Unregister"})})})})}function Te(){var e=Object(U.h)();return Object(I.jsxs)(U.d,{location:e,children:[Object(I.jsx)(Z,{path:"/home",children:Object(I.jsx)(pe,{})}),Object(I.jsx)(Z,{path:"/details/:id",children:Object(I.jsx)(Be,{})}),Object(I.jsx)(ve,{path:"/signin",children:Object(I.jsx)(T,{})}),Object(I.jsx)(ve,{path:"/signup",children:Object(I.jsx)(W,{})}),Object(I.jsx)(U.b,{path:"*",children:Object(I.jsx)(U.a,{to:"/signin"})})]})}function We(){var e=Object(s.c)((function(e){return e.user})).entities,t=Object(i.useState)(),n=Object(P.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(),o=Object(P.a)(c,2),d=o[0],u=o[1];return Object(i.useEffect)((function(){a(function(){var e,t,n=new ge.a({uri:"https://hasura.app.pariqsha.com/v1/graphql",headers:{Authorization:"Bearer ".concat(null===(e=q())||void 0===e?void 0:e.token)}}),i=Object(qe.a)((function(e){var t,n=e.graphQLErrors,i=e.operation,r=e.forward;if(n){var a,c=Object(Oe.a)(n);try{for(c.s();!(a=c.n()).done;){var s=a.value;switch(console.log(s),null===(t=s.extensions)||void 0===t?void 0:t.code){case"invalid-jwt":return Object(we.a)(y()).flatMap((function(e){if(e){C.dispatch(k.actions.saveToken(e));var t=i.getContext().headers;i.setContext({headers:Object(l.a)(Object(l.a)({},t),{},{authorization:"Bearer ".concat(e)})}),console.log(t),console.log("new headers",Object(l.a)(Object(l.a)({},t),{},{authorization:"Bearer ".concat(e)}))}return r(i)}))}}}catch(s){c.e(s)}finally{c.f()}}return r(i)})),r=new ke.SubscriptionClient("wss://hasura.app.pariqsha.com/v1/graphql",{reconnect:!0,connectionParams:{headers:{Authorization:"Bearer ".concat(null===(t=q())||void 0===t?void 0:t.token)}}});r.onError((function(e){console.log(e)}));var a=new _e.a(r),c=Object(ye.split)((function(e){var t=e.query,n=Object(Ce.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),a,n);return new ze.a({link:Object(ye.from)([i,c]),cache:new Ne.a})}()),u({headers:{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.token)}})}),[null===e||void 0===e?void 0:e.token]),r?Object(I.jsx)(Ie.a,{client:r,children:Object(I.jsx)(ee.a,{url:"http://192.168.1.9:3000/",options:d,children:Object(I.jsx)(M.a,{children:Object(I.jsx)(Te,{})})})}):Object(I.jsx)("div",{children:"Loading"})}var Ee=function(){return Object(I.jsx)(s.a,{store:C,children:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(S,{}),Object(I.jsx)(We,{})]})})},Ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(Ee,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Fe(t,e)}))}}()}},[[317,1,2]]]);
//# sourceMappingURL=main.2594a2b5.chunk.js.map